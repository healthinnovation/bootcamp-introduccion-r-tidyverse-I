<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>Introducción a R y Tidyverse I</title>
    <meta charset="utf-8" />
    <meta name="author" content="Laboratorio de Innovación en Salud" />
    <meta name="date" content="2022-09-29" />
    <script src="sesion_02_files/header-attrs/header-attrs.js"></script>
    <link href="sesion_02_files/tile-view/tile-view.css" rel="stylesheet" />
    <script src="sesion_02_files/tile-view/tile-view.js"></script>
    <script src="sesion_02_files/js-cookie/js.cookie.js"></script>
    <script src="sesion_02_files/peerjs/peerjs.min.js"></script>
    <script src="sesion_02_files/tiny.toast/toast.min.js"></script>
    <link href="sesion_02_files/xaringanExtra-broadcast/broadcast.css" rel="stylesheet" />
    <script src="sesion_02_files/xaringanExtra-broadcast/broadcast.js"></script>
    <script src="sesion_02_files/fabric/fabric.min.js"></script>
    <link href="sesion_02_files/xaringanExtra-scribble/scribble.css" rel="stylesheet" />
    <script src="sesion_02_files/xaringanExtra-scribble/scribble.js"></script>
    <script>document.addEventListener('DOMContentLoaded', function() { window.xeScribble = new Scribble({"pen_color":["#FF0000"],"pen_size":3,"eraser_size":30,"palette":[]}) })</script>
    <link href="sesion_02_files/panelset/panelset.css" rel="stylesheet" />
    <script src="sesion_02_files/panelset/panelset.js"></script>
    <script src="sesion_02_files/clipboard/clipboard.min.js"></script>
    <link href="sesion_02_files/xaringanExtra-clipboard/xaringanExtra-clipboard.css" rel="stylesheet" />
    <script src="sesion_02_files/xaringanExtra-clipboard/xaringanExtra-clipboard.js"></script>
    <script>window.xaringanExtraClipboard(null, {"button":"<i class=\"fa fa-clipboard\"><\/i>","success":"<i class=\"fa fa-check\" style=\"color: #90BE6D\"><\/i>","error":"<i class=\"fa fa-times-circle\" style=\"color: #F94144\"><\/i>"})</script>
    <link href="sesion_02_files/font-awesome/css/all.css" rel="stylesheet" />
    <link href="sesion_02_files/font-awesome/css/v4-shims.css" rel="stylesheet" />
    <link href="sesion_02_files/xaringanExtra-extra-styles/xaringanExtra-extra-styles.css" rel="stylesheet" />
    <script src="sesion_02_files/xaringanExtra-progressBar/progress-bar.js"></script>
    <meta name="github-repo" content="healthinnovation/curso-introduccion-r-tidyverse"/>
    <meta name="twitter:title" content="Introducción a R y Tidyverse I: Sesión 02"/>
    <meta name="twitter:description" content="Curso de Introducción a R y Tidyverse I: Sesión 02"/>
    <meta name="twitter:url" content="https://healthinnovation.github.io/curso-introduccion-r-tidyverse-I/sesion_02/#1"/>
    <meta name="twitter:image" content="https://healthinnovation.github.io/curso-introduccion-r-tidyverse-I/sesion_02/img/cover-sesion02.png"/>
    <meta name="twitter:image:alt" content="Cover de la Sesión 02 del curso de Introducción a R y Tidyverse I"/>
    <meta name="twitter:card" content="summary_large_image"/>
    <meta name="twitter:creator" content="@innovalab_imt"/>
    <meta name="twitter:site" content="@innovalab_imt"/>
    <meta property="og:title" content="Introducción a R y Tidyverse I: Sesión 02"/>
    <meta property="og:description" content="Curso de Introducción a R y Tidyverse I: Sesión 02"/>
    <meta property="og:url" content="https://healthinnovation.github.io/curso-introduccion-r-tidyverse-I/sesion_02/#1"/>
    <meta property="og:image" content="https://healthinnovation.github.io/curso-introduccion-r-tidyverse-I/sesion_02/img/cover-sesion02.png"/>
    <meta property="og:image:alt" content="Cover de la Sesión 02 del curso de Introducción a R y Tidyverse I"/>
    <meta property="og:type" content="website"/>
    <meta property="og:locale" content="en_US"/>
    <meta property="article:author" content="Laboratorio de Innovación en Salud"/>
    <script src="sesion_02_files/core-js/shim.min.js"></script>
    <script src="sesion_02_files/react/react.min.js"></script>
    <script src="sesion_02_files/react/react-dom.min.js"></script>
    <script src="sesion_02_files/reactwidget/react-tools.js"></script>
    <script src="sesion_02_files/htmlwidgets/htmlwidgets.js"></script>
    <script src="sesion_02_files/reactable-binding/reactable.js"></script>
    <link href="sesion_02_files/countdown/countdown.css" rel="stylesheet" />
    <script src="sesion_02_files/countdown/countdown.js"></script>
    <link href="sesion_02_files/font-awesome-animation/font-awesome-animation-emi.css" rel="stylesheet" />
    <script src="sesion_02_files/fontawesome/js/fontawesome-all.min.js"></script>
    <link rel="stylesheet" href="xaringan-lis.css" type="text/css" />
    <link rel="stylesheet" href="custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
















<div>
<style type="text/css">.xaringan-extra-logo {
width: 100px;
height: 116px;
z-index: 0;
background-image: url(img/InnovaLab_logo_blue.png);
background-size: contain;
background-repeat: no-repeat;
position: absolute;
top:1em;right:1em;
}
</style>
<script>(function () {
  let tries = 0
  function addLogo () {
    if (typeof slideshow === 'undefined') {
      tries += 1
      if (tries < 10) {
        setTimeout(addLogo, 100)
      }
    } else {
      document.querySelectorAll('.remark-slide-content:not(.title-slide):not(.inverse):not(.hide_logo)')
        .forEach(function (slide) {
          const logo = document.createElement('div')
          logo.classList = 'xaringan-extra-logo'
          logo.href = null
          slide.appendChild(logo)
        })
    }
  }
  document.addEventListener('DOMContentLoaded', addLogo)
})()</script>
</div>



<style>.xe__progress-bar__container {
  bottom:0;
  opacity: 1;
  position:absolute;
  right:0;
  left: 0;
}
.xe__progress-bar {
  height: 0.25em;
  background-color: #0051BA;
  width: calc(var(--slide-current) / var(--slide-total) * 100%);
}
.remark-visible .xe__progress-bar {
  animation: xe__progress-bar__wipe 200ms forwards;
  animation-timing-function: cubic-bezier(.86,0,.07,1);
}
@keyframes xe__progress-bar__wipe {
  0% { width: calc(var(--slide-previous) / var(--slide-total) * 100%); }
  100% { width: calc(var(--slide-current) / var(--slide-total) * 100%); }
}</style>




&lt;br&gt;
&lt;br&gt;

# Introducción a R y Tidyverse I

## Sesión 02

### Laboratorio de Innovación en Salud  

### 2022-09-29

&lt;br&gt;

[<svg aria-hidden="true" role="img" viewBox="0 0 496 512" style="height:1em;width:0.97em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3 .3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5 .3-6.2 2.3zm44.2-1.7c-2.9 .7-4.9 2.6-4.6 4.9 .3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3 .7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3 .3 2.9 2.3 3.9 1.6 1 3.6 .7 4.3-.7 .7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3 .7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3 .7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> @healthinnovation](https://github.com/healthinnovation)  
[<svg aria-hidden="true" role="img" viewBox="0 0 512 512" style="height:1em;width:1em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M459.4 151.7c.325 4.548 .325 9.097 .325 13.65 0 138.7-105.6 298.6-298.6 298.6-59.45 0-114.7-17.22-161.1-47.11 8.447 .974 16.57 1.299 25.34 1.299 49.06 0 94.21-16.57 130.3-44.83-46.13-.975-84.79-31.19-98.11-72.77 6.498 .974 12.99 1.624 19.82 1.624 9.421 0 18.84-1.3 27.61-3.573-48.08-9.747-84.14-51.98-84.14-102.1v-1.299c13.97 7.797 30.21 12.67 47.43 13.32-28.26-18.84-46.78-51.01-46.78-87.39 0-19.49 5.197-37.36 14.29-52.95 51.65 63.67 129.3 105.3 216.4 109.8-1.624-7.797-2.599-15.92-2.599-24.04 0-57.83 46.78-104.9 104.9-104.9 30.21 0 57.5 12.67 76.67 33.14 23.72-4.548 46.46-13.32 66.6-25.34-7.798 24.37-24.37 44.83-46.13 57.83 21.12-2.273 41.58-8.122 60.43-16.24-14.29 20.79-32.16 39.31-52.63 54.25z"/></svg> @innovalab_imt](https://twitter.com/innovalab_imt)  
[<svg aria-hidden="true" role="img" viewBox="0 0 640 512" style="height:1em;width:1.25em;vertical-align:-0.125em;margin-left:auto;margin-right:auto;font-size:inherit;fill:currentColor;overflow:visible;position:relative;"><path d="M172.5 131.1C228.1 75.51 320.5 75.51 376.1 131.1C426.1 181.1 433.5 260.8 392.4 318.3L391.3 319.9C381 334.2 361 337.6 346.7 327.3C332.3 317 328.9 297 339.2 282.7L340.3 281.1C363.2 249 359.6 205.1 331.7 177.2C300.3 145.8 249.2 145.8 217.7 177.2L105.5 289.5C73.99 320.1 73.99 372 105.5 403.5C133.3 431.4 177.3 435 209.3 412.1L210.9 410.1C225.3 400.7 245.3 404 255.5 418.4C265.8 432.8 262.5 452.8 248.1 463.1L246.5 464.2C188.1 505.3 110.2 498.7 60.21 448.8C3.741 392.3 3.741 300.7 60.21 244.3L172.5 131.1zM467.5 380C411 436.5 319.5 436.5 263 380C213 330 206.5 251.2 247.6 193.7L248.7 192.1C258.1 177.8 278.1 174.4 293.3 184.7C307.7 194.1 311.1 214.1 300.8 229.3L299.7 230.9C276.8 262.1 280.4 306.9 308.3 334.8C339.7 366.2 390.8 366.2 422.3 334.8L534.5 222.5C566 191 566 139.1 534.5 108.5C506.7 80.63 462.7 76.99 430.7 99.9L429.1 101C414.7 111.3 394.7 107.1 384.5 93.58C374.2 79.2 377.5 59.21 391.9 48.94L393.5 47.82C451 6.731 529.8 13.25 579.8 63.24C636.3 119.7 636.3 211.3 579.8 267.7L467.5 380z"/></svg> innovalab.info](https://www.innovalab.info/)  


---

## Contenidos

.line-space3-0[.font120[
- Importación de datos de principales formatos
- Reconocimiento de variables (función glimpse)
- Anidación de funciones con pipe (%&gt;%)
- Cálculo de variables (introducción a mutate)
- Contabilización y ordenamiento en base a variables (uso de count y arrange).
- Explicación de tidy data 
- Modificación a la estructura de los datos mediante pivot longer y wider 
]]

---
class: center, middle, inverse

# Exploración competencial

---
## Base de datos a utilizar

Usaremos una base de datos proporcionado por [Gan et al. (2018)](https://www.nature.com/articles/s41598-018-27482-2) en su estudio:

&lt;img src="img/levofloxacin_trial.png" alt="Article: Efficacy of tw o different dosages of levofloxacin in curing Helicobacter pylori infection: A Prospective, Single-Center, randomized clinical trial" width="95%" style="display: block; margin: auto;" /&gt;

---

## Base de datos a utilizar

.line-space2-0[.font110[

Dicho estudio es un ensayo clínico aleatorizado (ECA) de 400 participantes en el que se compara 2 tipos de tratamientos para erradicar la infección por *Helicobácter Pylori*.

- **Grupo A** de tratamiento: Esomeprazol, amoxicilina, bismuto coloidal con pectina y levofloxacina 500mg una vez al día.
- **Grupo B** de tratamiento: Levofloxacina 200mg dos veces al día, durante un periodo de 14 días.


<div id="htmlwidget-4a7c598d18b68098c6cf" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-4a7c598d18b68098c6cf">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"Randomized group":["group A","group B"],"n":[200,200]},"columns":[{"accessor":"Randomized group","name":"Randomized group","type":"character","align":"center","headerStyle":{"background":"#f7f7f8","fontWeight":700}},{"accessor":"n","name":"n","type":"numeric","align":"center","headerStyle":{"background":"#f7f7f8","fontWeight":700}}],"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":1,"highlight":true,"striped":true,"dataKey":"fb1ea7d6d845eba4fa20ac687ddada50"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>
]]

---

## Importación de datos

<div id="htmlwidget-782d7a556dd660eee5fb" class="reactable html-widget" style="width:auto;height:auto;"></div>
<script type="application/json" data-for="htmlwidget-782d7a556dd660eee5fb">{"x":{"tag":{"name":"Reactable","attribs":{"data":{"Función":["readxl::read_excel()","readr::read_csv()","haven::read_dta()","haven::read_sav()"],"Tipo de archivo":["excel_logo","csv_logo","stata_logo","spss_logo"]},"columns":[{"accessor":"Función","name":"Función","type":"character","minWidth":70,"align":"center","headerStyle":{"background":"#f7f7f8","fontWeight":700},"cell":[{"name":"code","attribs":{"style":{"position":"relative","top":"30%"},"className":"remark-inline-code"},"children":["readxl::read_excel()"]},{"name":"code","attribs":{"style":{"position":"relative","top":"30%"},"className":"remark-inline-code"},"children":["readr::read_csv()"]},{"name":"code","attribs":{"style":{"position":"relative","top":"30%"},"className":"remark-inline-code"},"children":["haven::read_dta()"]},{"name":"code","attribs":{"style":{"position":"relative","top":"30%"},"className":"remark-inline-code"},"children":["haven::read_sav()"]}]},{"accessor":"Tipo de archivo","name":"Tipo de archivo","type":"character","minWidth":70,"align":"center","headerStyle":{"background":"#f7f7f8","fontWeight":700},"cell":[{"name":"div","attribs":{"style":{"width":"75px","margin-left":"45%"}},"children":[{"name":"img","attribs":{"alt":"excel_logo","src":"img/excel_logo.png","className":"icono-archivo"},"children":[]}]},{"name":"div","attribs":{"style":{"width":"75px","margin-left":"45%"}},"children":[{"name":"img","attribs":{"alt":"csv_logo","src":"img/csv_logo.png","className":"icono-archivo"},"children":[]}]},{"name":"div","attribs":{"style":{"width":"75px","margin-left":"45%"}},"children":[{"name":"img","attribs":{"alt":"stata_logo","src":"img/stata_logo.png","className":"icono-archivo"},"children":[]}]},{"name":"div","attribs":{"style":{"width":"75px","margin-left":"45%"}},"children":[{"name":"img","attribs":{"alt":"spss_logo","src":"img/spss_logo.png","className":"icono-archivo"},"children":[]}]}]}],"defaultPageSize":10,"paginationType":"numbers","showPageInfo":true,"minRows":1,"highlight":true,"striped":true,"dataKey":"dbe30edd114f1bc1cebc817207ef008c"},"children":[]},"class":"reactR_markup"},"evals":[],"jsHooks":[]}</script>

---

## Importación de datos

Vamos a importar el archivo excel que tiene una extensión `.xlsx` y se encuentra dentro de la carpeta `data`. 

**Recuerda**: Al importar el archivo debemos asignarlo a un objeto, para poder guardar la información. En este caso llamaremos a este objeto como `trial_data`.

.scroll-output325[

```r
trial_data &lt;- readxl::read_excel("data/researchdata.xlsx")

trial_data
```

```
## # A tibble: 400 × 10
##    Patient numbe…¹ Basel…² Rando…³ Follo…⁴ adver…⁵ adver…⁶ Adver…⁷ Compl…⁸ Uncom…⁹ per p…˟
##              &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
##  1               1 Positi… group B Negati… No      NA      NA      Yes     NA      Yes    
##  2               2 Positi… group A Negati… Yes     Fatigue Mild    Yes     NA      Yes    
##  3               3 Positi… group B Negati… No      NA      NA      Yes     NA      Yes    
##  4               4 Positi… group A Positi… Yes     Abdomi… Mild    Yes     NA      Yes    
##  5               5 Positi… group A Negati… Yes     Drowsi… Mild    Yes     NA      Yes    
##  6               6 Positi… group A Negati… No      NA      NA      Yes     NA      Yes    
##  7               7 Positi… group B Negati… No      NA      NA      Yes     NA      Yes    
##  8               8 Positi… group A Negati… No      NA      NA      Yes     NA      Yes    
##  9               9 Positi… group A Negati… No      NA      NA      Yes     NA      Yes    
## 10              10 Positi… group A NA      NA      NA      NA      No      lost t… No     
## # … with 390 more rows, and abbreviated variable names ¹​`Patient number`,
## #   ²​`Baseline 13C-UBT`, ³​`Randomized group`,
## #   ⁴​`Follow-up13C-UBT (4 weeks after therapy)`, ⁵​`adverse drug reactions`,
## #   ⁶​`adverse drug reactions  content`, ⁷​`Adverse drug reaction classified`,
## #   ⁸​`Complete the study`, ⁹​`Uncompleted Reason`, ˟​`per protocol analysis`
```
]
---

## Importación de datos 2

.font110[
En algunos casos estaremos frente a base de datos que contengan cierta información en sus primeras filas que no sean relevantes como datos a considerar para el análisis. La mayor cantidad de veces tienen un propósito meramente informativo. Ejemplo:

&lt;img src="img/researchdata2_preview.png" alt="Vista preliminar de una data que contenga las primeras filas a modo de información" width="95%" style="display: block; margin: auto;" /&gt;
]
---

## Importación de datos 2

.panelset[
.panel[.panel-name[Situación]
.line-space2-0[.font110[
En estas situaciones tenemos 2 alternativas:

a) Editar el archivo en cuestión y eliminar las filas que no sean relevantes.
b) Durante la importación indicar que se omitan las primeras filas o filtrarlas una vez se haya importado.

Siempre será una mejor opción manejar los cambios desde el código, ya que se esa manera mantenemos los archivos originales y además podemos tener un registro de los cambios realizados.

Para hacer esto usaremos el argumento `skip` dentro de la función `readxl::read_excel()`, que indicará la cantidad de filas que deseamos omitir en la importación.

]]
]

.panel[.panel-name[Problema]

Si intentamos importar la data sin especificar ningún argumento, veremos como se registran informaciones que no requerimos, y solo se encuentran en los datos a manera de información.

.scroll-output325[

```r
trial_data2 &lt;- readxl::read_excel("data/researchdata2.xlsx")

trial_data2
```

```
## # A tibble: 403 × 10
##    ...1           Data de ejemplo para e…¹ ...3  ...4  ...5  ...6  ...7  ...8  ...9  ...10
##    &lt;chr&gt;          &lt;chr&gt;                    &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt; &lt;chr&gt;
##  1 &lt;NA&gt;           &lt;NA&gt;                     &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; 
##  2 &lt;NA&gt;           &lt;NA&gt;                     &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt;  &lt;NA&gt; 
##  3 Patient number Baseline 13C-UBT         Rand… Foll… adve… adve… Adve… Comp… Unco… per …
##  4 1              Positive                 grou… Nega… No    NA    NA    Yes   NA    Yes  
##  5 2              Positive                 grou… Nega… Yes   Fati… Mild  Yes   NA    Yes  
##  6 3              Positive                 grou… Nega… No    NA    NA    Yes   NA    Yes  
##  7 4              Positive                 grou… Posi… Yes   Abdo… Mild  Yes   NA    Yes  
##  8 5              Positive                 grou… Nega… Yes   Drow… Mild  Yes   NA    Yes  
##  9 6              Positive                 grou… Nega… No    NA    NA    Yes   NA    Yes  
## 10 7              Positive                 grou… Nega… No    NA    NA    Yes   NA    Yes  
## # … with 393 more rows, and abbreviated variable name ¹​`Data de ejemplo para el curso`
```
]]

.panel[.panel-name[Solución]
Ya que en este caso la base de datos llamada `researchdata2.xlsx` empieza a mostrar datos relevantes a partir de la fila 4, requeriremos omitir o saltar (`skip`) 3 filas, se la siguiente manera:

.scroll-output325[

```r
trial_data2 &lt;- readxl::read_excel("data/researchdata2.xlsx",
                                  skip = 3)

trial_data2
```

```
## # A tibble: 400 × 10
##    Patient numbe…¹ Basel…² Rando…³ Follo…⁴ adver…⁵ adver…⁶ Adver…⁷ Compl…⁸ Uncom…⁹ per p…˟
##              &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
##  1               1 Positi… group B Negati… No      NA      NA      Yes     NA      Yes    
##  2               2 Positi… group A Negati… Yes     Fatigue Mild    Yes     NA      Yes    
##  3               3 Positi… group B Negati… No      NA      NA      Yes     NA      Yes    
##  4               4 Positi… group A Positi… Yes     Abdomi… Mild    Yes     NA      Yes    
##  5               5 Positi… group A Negati… Yes     Drowsi… Mild    Yes     NA      Yes    
##  6               6 Positi… group A Negati… No      NA      NA      Yes     NA      Yes    
##  7               7 Positi… group B Negati… No      NA      NA      Yes     NA      Yes    
##  8               8 Positi… group A Negati… No      NA      NA      Yes     NA      Yes    
##  9               9 Positi… group A Negati… No      NA      NA      Yes     NA      Yes    
## 10              10 Positi… group A NA      NA      NA      NA      No      lost t… No     
## # … with 390 more rows, and abbreviated variable names ¹​`Patient number`,
## #   ²​`Baseline 13C-UBT`, ³​`Randomized group`,
## #   ⁴​`Follow-up13C-UBT (4 weeks after therapy)`, ⁵​`adverse drug reactions`,
## #   ⁶​`adverse drug reactions  content`, ⁷​`Adverse drug reaction classified`,
## #   ⁸​`Complete the study`, ⁹​`Uncompleted Reason`, ˟​`per protocol analysis`
```
]

]]

---

#¡Hazlo tú mismo!

.line-space2-0[.font120[
Todas las importaciones requeridas serán asignadas en un objeto.

1. Realizar la importación del archivo excel
1. Realizar la importación del archivo csv
1. Realizar la importación del archivo spss
]]

<div class="countdown" id="timer_a16a1c1c" data-warn-when="30" data-update-every="1" tabindex="0" style="right:0;bottom:0;margin:1em;font-size:4em;">
<div class="countdown-controls"><button class="countdown-bump-down">&minus;</button><button class="countdown-bump-up">&plus;</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">08</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
## Función Glimpse 

.panelset[
.panel[.panel-name[¿Para qué sirve?]
.pull-left[.line-space2-0[.font120[
- Versión transpuesta de print
- Ayuda a visualizar la mayor cantidad de datos de muchas columnas.
- Muestra el nombre de la variable junto con una designación de tipo de variable.
]]]

.pull-right[
&lt;br&gt;
&lt;span style="background-color: #eeff41;
             padding: 20px 250px 15px 10px"&gt;**Mediante la función:**&lt;/span&gt;


```r
glimpse()
```

**Recordar importar el paquete `tidyverse`**
.scroll-output200[

```r
library(tidyverse)
```

```
## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.2 ──
## ✔ ggplot2 3.3.6     ✔ purrr   0.3.4
## ✔ tibble  3.1.8     ✔ stringr 1.4.1
## ✔ tidyr   1.2.1     ✔ forcats 0.5.2
## ✔ readr   2.1.2     
## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
## ✖ tidyr::extract()   masks magrittr::extract()
## ✖ dplyr::filter()    masks stats::filter()
## ✖ dplyr::lag()       masks stats::lag()
## ✖ purrr::set_names() masks magrittr::set_names()
```
]]]

.panel[.panel-name[Ejemplo]

.pull-left[
Así habitualmente observamos la data:
.scroll-output350[

```r
nycflights13::flights
```

```
## # A tibble: 336,776 × 19
##     year month   day dep_time sched_dep_…¹ dep_d…²
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;        &lt;int&gt;   &lt;dbl&gt;
##  1  2013     1     1      517          515       2
##  2  2013     1     1      533          529       4
##  3  2013     1     1      542          540       2
##  4  2013     1     1      544          545      -1
##  5  2013     1     1      554          600      -6
##  6  2013     1     1      554          558      -4
##  7  2013     1     1      555          600      -5
##  8  2013     1     1      557          600      -3
##  9  2013     1     1      557          600      -3
## 10  2013     1     1      558          600      -2
## # … with 336,766 more rows, 13 more variables:
## #   arr_time &lt;int&gt;, sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;,
## #   tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
## #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, and
## #   abbreviated variable names ¹​sched_dep_time, …
```
]]

.pull-right[
Con `glimpse()`, podrías tener un vistazo rápido de la estructura de los datos:

.scroll-output325[

```r
glimpse(nycflights13::flights)
```

```
## Rows: 336,776
## Columns: 19
## $ year           &lt;int&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2…
## $ month          &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ day            &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ dep_time       &lt;int&gt; 517, 533, 542, 544, 554, 554, 555, 557, 557, 558, 558, …
## $ sched_dep_time &lt;int&gt; 515, 529, 540, 545, 600, 558, 600, 600, 600, 600, 600, …
## $ dep_delay      &lt;dbl&gt; 2, 4, 2, -1, -6, -4, -5, -3, -3, -2, -2, -2, -2, -2, -1…
## $ arr_time       &lt;int&gt; 830, 850, 923, 1004, 812, 740, 913, 709, 838, 753, 849,…
## $ sched_arr_time &lt;int&gt; 819, 830, 850, 1022, 837, 728, 854, 723, 846, 745, 851,…
## $ arr_delay      &lt;dbl&gt; 11, 20, 33, -18, -25, 12, 19, -14, -8, 8, -2, -3, 7, -1…
## $ carrier        &lt;chr&gt; "UA", "UA", "AA", "B6", "DL", "UA", "B6", "EV", "B6", "…
## $ flight         &lt;int&gt; 1545, 1714, 1141, 725, 461, 1696, 507, 5708, 79, 301, 4…
## $ tailnum        &lt;chr&gt; "N14228", "N24211", "N619AA", "N804JB", "N668DN", "N394…
## $ origin         &lt;chr&gt; "EWR", "LGA", "JFK", "JFK", "LGA", "EWR", "EWR", "LGA",…
## $ dest           &lt;chr&gt; "IAH", "IAH", "MIA", "BQN", "ATL", "ORD", "FLL", "IAD",…
## $ air_time       &lt;dbl&gt; 227, 227, 160, 183, 116, 150, 158, 53, 140, 138, 149, 1…
## $ distance       &lt;dbl&gt; 1400, 1416, 1089, 1576, 762, 719, 1065, 229, 944, 733, …
## $ hour           &lt;dbl&gt; 5, 5, 5, 5, 6, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 6, 6, 6…
## $ minute         &lt;dbl&gt; 15, 29, 40, 45, 0, 58, 0, 0, 0, 0, 0, 0, 0, 0, 0, 59, 0…
## $ time_hour      &lt;dttm&gt; 2013-01-01 05:00:00, 2013-01-01 05:00:00, 2013-01-01 0…
```
]]]

.panel[.panel-name[Glimpse]

Generalmente la vista de `glimpse()` es suficientemente ordenada para poder observar la estructura de la data sin problemas. Pero también se puede usar el argumento `width` para poder especificar ello.

.scroll-output325[

```r
glimpse(nycflights13::flights, width = 90)
```

```
## Rows: 336,776
## Columns: 19
## $ year           &lt;int&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013,…
## $ month          &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
## $ day            &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1,…
## $ dep_time       &lt;int&gt; 517, 533, 542, 544, 554, 554, 555, 557, 557, 558, 558, 558, 558, …
## $ sched_dep_time &lt;int&gt; 515, 529, 540, 545, 600, 558, 600, 600, 600, 600, 600, 600, 600, …
## $ dep_delay      &lt;dbl&gt; 2, 4, 2, -1, -6, -4, -5, -3, -3, -2, -2, -2, -2, -2, -1, 0, -1, 0…
## $ arr_time       &lt;int&gt; 830, 850, 923, 1004, 812, 740, 913, 709, 838, 753, 849, 853, 924,…
## $ sched_arr_time &lt;int&gt; 819, 830, 850, 1022, 837, 728, 854, 723, 846, 745, 851, 856, 917,…
## $ arr_delay      &lt;dbl&gt; 11, 20, 33, -18, -25, 12, 19, -14, -8, 8, -2, -3, 7, -14, 31, -4,…
## $ carrier        &lt;chr&gt; "UA", "UA", "AA", "B6", "DL", "UA", "B6", "EV", "B6", "AA", "B6",…
## $ flight         &lt;int&gt; 1545, 1714, 1141, 725, 461, 1696, 507, 5708, 79, 301, 49, 71, 194…
## $ tailnum        &lt;chr&gt; "N14228", "N24211", "N619AA", "N804JB", "N668DN", "N39463", "N516…
## $ origin         &lt;chr&gt; "EWR", "LGA", "JFK", "JFK", "LGA", "EWR", "EWR", "LGA", "JFK", "L…
## $ dest           &lt;chr&gt; "IAH", "IAH", "MIA", "BQN", "ATL", "ORD", "FLL", "IAD", "MCO", "O…
## $ air_time       &lt;dbl&gt; 227, 227, 160, 183, 116, 150, 158, 53, 140, 138, 149, 158, 345, 3…
## $ distance       &lt;dbl&gt; 1400, 1416, 1089, 1576, 762, 719, 1065, 229, 944, 733, 1028, 1005…
## $ hour           &lt;dbl&gt; 5, 5, 5, 5, 6, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 6, 6, 6, 6, 6, 6,…
## $ minute         &lt;dbl&gt; 15, 29, 40, 45, 0, 58, 0, 0, 0, 0, 0, 0, 0, 0, 0, 59, 0, 0, 0, 0,…
## $ time_hour      &lt;dttm&gt; 2013-01-01 05:00:00, 2013-01-01 05:00:00, 2013-01-01 05:00:00, 2…
```
]]]

---

## Operador Pipe `%&gt;%`

.pull-left[
**Queremos aplicar más de una función:**
El uso de funciones de forma anidada puede resultar ilegible o difícil de comprender.


```r
tabla(formato(coeficiente(data)))
```

El operador `%&gt;%` nos permite escribir una secuencia de operaciones de izquierda a derecha:


```r
coeficiente(data) %&gt;% formato() %&gt;% tabla()
```

**O mejor aún:**


```r
coeficiente(data) %&gt;% 
  formato() %&gt;% 
  tabla()
```
]

.pull-right[.font120[
&lt;br&gt;
Útil para concatenar múltiples operaciones en dplyr 

&lt;br&gt;
&lt;span style="background-color: #eeff41;
             padding: 20px 250px 15px 10px"&gt;**Atajo de Teclado**&lt;/span&gt;

&lt;br&gt;

&lt;img src="img/atajo_pipe.svg" width="100%" /&gt;
]]

---

## Función `mutate()`


.pull-left[.line-space2-0[.font110[ 
Con `mutate()` podemos realizar modificaciones en las variables.  Por ej. sumar variables, o modificarlas de alguna manera (transformar a porcentaje, multiplicarlas por alguna constante, etc.). Estas modificaciones pueden realizarse:

- Creando una nueva variable a partir de otras ya existentes.
- Modificar una variable existente en la misma variable.

]]]

.pull-right[.font110[
&lt;span style="background-color: #eeff41;
             padding: 20px 250px 15px 10px"&gt;**Ejemplo:**&lt;/span&gt;


```r
library(tidyverse)

df %&gt;% 
  mutate(
    New_var = var*2
  )
```

**Explicación:**

En una data llamada `df` se estaría aplicando la función `mutate` creando una variable llamada `New_var` a partir de otra variable llamada `var` que está siendo multiplicada por 2.

]]

---
## Uso práctico de `mutate()`


.panelset[
.panel[.panel-name[Reconocimiento de BD]

Para esta ejemplificación continuaremos usando la base de datos del ECA  sobre la [erradicación de la infección por *Helicobácter Pylori*](https://www.nature.com/articles/s41598-018-27482-2).

.pull-left[
.scroll-output350[

```r
trial_data &lt;- readxl::read_excel("data/researchdata.xlsx")
trial_data
```

```
## # A tibble: 400 × 10
##    Patient …¹ Basel…² Rando…³ Follo…⁴ adver…⁵
##         &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
##  1          1 Positi… group B Negati… No     
##  2          2 Positi… group A Negati… Yes    
##  3          3 Positi… group B Negati… No     
##  4          4 Positi… group A Positi… Yes    
##  5          5 Positi… group A Negati… Yes    
##  6          6 Positi… group A Negati… No     
##  7          7 Positi… group B Negati… No     
##  8          8 Positi… group A Negati… No     
##  9          9 Positi… group A Negati… No     
## 10         10 Positi… group A NA      NA     
## # … with 390 more rows, 5 more variables:
## #   `adverse drug reactions  content` &lt;chr&gt;,
## #   `Adverse drug reaction classified` &lt;chr&gt;,
## #   `Complete the study` &lt;chr&gt;,
## #   `Uncompleted Reason` &lt;chr&gt;,
## #   `per protocol analysis` &lt;chr&gt;, and
## #   abbreviated variable names …
```
]]

.pull-right[
.scroll-output350[

```r
glimpse(trial_data)
```

```
## Rows: 400
## Columns: 10
## $ `Patient number`                           &lt;dbl&gt; 1, 2, 3, 4, 5, 6,…
## $ `Baseline 13C-UBT`                         &lt;chr&gt; "Positive", "Posi…
## $ `Randomized group`                         &lt;chr&gt; "group B", "group…
## $ `Follow-up13C-UBT (4 weeks after therapy)` &lt;chr&gt; "Negative", "Nega…
## $ `adverse drug reactions`                   &lt;chr&gt; "No", "Yes", "No"…
## $ `adverse drug reactions  content`          &lt;chr&gt; "NA", "Fatigue", …
## $ `Adverse drug reaction classified`         &lt;chr&gt; "NA", "Mild", "NA…
## $ `Complete the study`                       &lt;chr&gt; "Yes", "Yes", "Ye…
## $ `Uncompleted Reason`                       &lt;chr&gt; "NA", "NA", "NA",…
## $ `per protocol analysis`                    &lt;chr&gt; "Yes", "Yes", "Ye…
```
]]
]

.panel[.panel-name[Janitor]

En algunas ocasiones las base de datos contienen nombres de variables muy largas o que incluso pueden contener espacios o símbolos. Una forma sencilla de solucionar ello es mediante el uso de la función `clean_names()` del paquete `janitor`.

.scroll-output300[

```r
trial_data &lt;- trial_data %&gt;% 
  janitor::clean_names() 
trial_data
```

```
## # A tibble: 400 × 10
##    patient_number baseli…¹ rando…² follo…³ adver…⁴ adver…⁵ adver…⁶ compl…⁷ uncom…⁸ per_p…⁹
##             &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
##  1              1 Positive group B Negati… No      NA      NA      Yes     NA      Yes    
##  2              2 Positive group A Negati… Yes     Fatigue Mild    Yes     NA      Yes    
##  3              3 Positive group B Negati… No      NA      NA      Yes     NA      Yes    
##  4              4 Positive group A Positi… Yes     Abdomi… Mild    Yes     NA      Yes    
##  5              5 Positive group A Negati… Yes     Drowsi… Mild    Yes     NA      Yes    
##  6              6 Positive group A Negati… No      NA      NA      Yes     NA      Yes    
##  7              7 Positive group B Negati… No      NA      NA      Yes     NA      Yes    
##  8              8 Positive group A Negati… No      NA      NA      Yes     NA      Yes    
##  9              9 Positive group A Negati… No      NA      NA      Yes     NA      Yes    
## 10             10 Positive group A NA      NA      NA      NA      No      lost t… No     
## # … with 390 more rows, and abbreviated variable names ¹​baseline_13c_ubt,
## #   ²​randomized_group, ³​follow_up13c_ubt_4_weeks_after_therapy, ⁴​adverse_drug_reactions,
## #   ⁵​adverse_drug_reactions_content, ⁶​adverse_drug_reaction_classified,
## #   ⁷​complete_the_study, ⁸​uncompleted_reason, ⁹​per_protocol_analysis
```
]]

.panel[.panel-name[Rename]

A pesar de que `janitor::clean_names()` nos proporciona una gran solución para el formateo de nombres de variables que tienen espacios y/o símbolos, a veces podría ser necesario modificar específicamente el nombre de algunas variables. Para ello usaremos la función `rename` de la siguiente manera:

.scroll-output300[

```r
trial_data &lt;- trial_data %&gt;% 
  rename(
*   follow_4_weeks = follow_up13c_ubt_4_weeks_after_therapy
  )
trial_data
```

```
## # A tibble: 400 × 10
*##    patient_number baseli…¹ rando…² follo…³ adver…⁴ adver…⁵ adver…⁶ compl…⁷ uncom…⁸ per_p…⁹
##             &lt;dbl&gt; &lt;chr&gt;    &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
##  1              1 Positive group B Negati… No      NA      NA      Yes     NA      Yes    
##  2              2 Positive group A Negati… Yes     Fatigue Mild    Yes     NA      Yes    
##  3              3 Positive group B Negati… No      NA      NA      Yes     NA      Yes    
##  4              4 Positive group A Positi… Yes     Abdomi… Mild    Yes     NA      Yes    
##  5              5 Positive group A Negati… Yes     Drowsi… Mild    Yes     NA      Yes    
##  6              6 Positive group A Negati… No      NA      NA      Yes     NA      Yes    
##  7              7 Positive group B Negati… No      NA      NA      Yes     NA      Yes    
##  8              8 Positive group A Negati… No      NA      NA      Yes     NA      Yes    
##  9              9 Positive group A Negati… No      NA      NA      Yes     NA      Yes    
## 10             10 Positive group A NA      NA      NA      NA      No      lost t… No     
## # … with 390 more rows, and abbreviated variable names ¹​baseline_13c_ubt,
## #   ²​randomized_group, ³​follow_4_weeks, ⁴​adverse_drug_reactions,
## #   ⁵​adverse_drug_reactions_content, ⁶​adverse_drug_reaction_classified,
## #   ⁷​complete_the_study, ⁸​uncompleted_reason, ⁹​per_protocol_analysis
```
]]

.panel[.panel-name[Mutate I]

.pull-left[.line-space2-0[
Una de las primeras cosas que podemos hacer con `mutate` durante el primer contacto con la data que trabajemos es:

- Configurar variables `ID` como **texto** (`character`).
- Configurar variables como **factores**.
- Configurar respuestas `NA` en caso tengan alguna otra codificación.
]]

.pull-right[
1. Configurar la variable `ID`

.scroll-output325[.code80[

```r
trial_data %&gt;% 
  mutate(
    patient_number = as.character(patient_number)
  )
```

```
## # A tibble: 400 × 10
##    patient_…¹ basel…² rando…³ follo…⁴ adver…⁵
##    &lt;chr&gt;      &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
##  1 1          Positi… group B Negati… No     
##  2 2          Positi… group A Negati… Yes    
##  3 3          Positi… group B Negati… No     
##  4 4          Positi… group A Positi… Yes    
##  5 5          Positi… group A Negati… Yes    
##  6 6          Positi… group A Negati… No     
##  7 7          Positi… group B Negati… No     
##  8 8          Positi… group A Negati… No     
##  9 9          Positi… group A Negati… No     
## 10 10         Positi… group A NA      NA     
## # … with 390 more rows, 5 more variables:
## #   adverse_drug_reactions_content &lt;chr&gt;,
## #   adverse_drug_reaction_classified &lt;chr&gt;,
## #   complete_the_study &lt;chr&gt;,
## #   uncompleted_reason &lt;chr&gt;,
## #   per_protocol_analysis &lt;chr&gt;, and
## #   abbreviated variable names …
```
]]
]]

.panel[.panel-name[Mutate II]
.pull-left[
&lt;ol start="2"&gt;
  &lt;li&gt;Configurar &lt;strong&gt;factores&lt;/strong&gt;&lt;/li&gt;
&lt;/ol&gt;

Configurar una variable como factor es la forma en que R sabrá que una variable debe ser considerada como categórica. Así el contenido sea un número, esta será tratada como categoría. 

Tiene especial relevancia cuando se trabaja con gráficos.

]

.pull-right[
.scroll-output350[.code80[

```r
trial_data %&gt;% 
  mutate(
*   randomized_group = factor(randomized_group),
*   complete_the_study = factor(complete_the_study)
  )
```

```
## # A tibble: 400 × 10
##    patient_…¹ basel…² rando…³ follo…⁴ adver…⁵
##         &lt;dbl&gt; &lt;chr&gt;   &lt;fct&gt;   &lt;chr&gt;   &lt;chr&gt;  
##  1          1 Positi… group B Negati… No     
##  2          2 Positi… group A Negati… Yes    
##  3          3 Positi… group B Negati… No     
##  4          4 Positi… group A Positi… Yes    
##  5          5 Positi… group A Negati… Yes    
##  6          6 Positi… group A Negati… No     
##  7          7 Positi… group B Negati… No     
##  8          8 Positi… group A Negati… No     
##  9          9 Positi… group A Negati… No     
## 10         10 Positi… group A NA      NA     
## # … with 390 more rows, 5 more variables:
*## #   adverse_drug_reactions_content &lt;chr&gt;,
## #   adverse_drug_reaction_classified &lt;chr&gt;,
## #   complete_the_study &lt;fct&gt;,
## #   uncompleted_reason &lt;chr&gt;,
## #   per_protocol_analysis &lt;chr&gt;, and
*## #   abbreviated variable names …
```
]]]
]
]

---
## Uso de `count()`

.line-space1-5[
La función `count` es bastante sencilla y poderosa a la vez. Permite obtener una tabla en formato `tibble` que representará las frecuencias (cantidades `n`) de una o múltiples variables en específico.
]


```r
trial_data %&gt;% 
  count(adverse_drug_reactions)
```

```
## # A tibble: 4 × 2
##   adverse_drug_reactions     n
##   &lt;chr&gt;                  &lt;int&gt;
## 1 NA                        10
## 2 No                       295
## 3 Yes                       94
## 4 &lt;NA&gt;                       1
```

.line-space1-5[
La tabla generada muestra que cantidad de personas han tenido reacciones adversas a los medicamentos ya sea en el Grupo A o B. Sin embargo, también se aprecia que hay 2 respuestas que indican la presencia de datos vacíos: **NA** y **&amp;lt;NA&amp;gt;**. El primero está codificado directamente como texto (`character`) y sel segudo es un `NA` real, es decir que comunica la ausencia de un dato.
]

---


count: false
 
## Uso de arrange() 
.line-space1-7[.font100[Ya hemos visto que `count()` es sumamente útil. Además, basta con agregar más variables dentro de sus argumentos, para que estos automáticamente ingresen a generar una tabla de frecuencias. 

 Sin embargo, a veces puede ser necesario ordenar esos resultados, para ello usaremos `arrange()`. La función `arrange()` permitirá ordenar un objeto en base a una o múltiples variables.]]
.panel1-arrange_1-user[

```r
*trial_data
```
]
 
.panel2-arrange_1-user[

```
## # A tibble: 400 × 10
##    patient…¹ basel…² rando…³ follo…⁴ adver…⁵ adver…⁶ adver…⁷
##        &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
##  1         1 Positi… group B Negati… No      NA      NA     
##  2         2 Positi… group A Negati… Yes     Fatigue Mild   
##  3         3 Positi… group B Negati… No      NA      NA     
##  4         4 Positi… group A Positi… Yes     Abdomi… Mild   
##  5         5 Positi… group A Negati… Yes     Drowsi… Mild   
##  6         6 Positi… group A Negati… No      NA      NA     
##  7         7 Positi… group B Negati… No      NA      NA     
##  8         8 Positi… group A Negati… No      NA      NA     
##  9         9 Positi… group A Negati… No      NA      NA     
## 10        10 Positi… group A NA      NA      NA      NA     
## # … with 390 more rows, 3 more variables:
## #   complete_the_study &lt;chr&gt;, uncompleted_reason &lt;chr&gt;,
## #   per_protocol_analysis &lt;chr&gt;, and abbreviated variable
## #   names ¹​patient_number, ²​baseline_13c_ubt,
## #   ³​randomized_group, ⁴​follow_4_weeks,
## #   ⁵​adverse_drug_reactions,
## #   ⁶​adverse_drug_reactions_content, …
```
]

---
count: false
 
## Uso de arrange() 
.line-space1-7[.font100[Ya hemos visto que `count()` es sumamente útil. Además, basta con agregar más variables dentro de sus argumentos, para que estos automáticamente ingresen a generar una tabla de frecuencias. 

 Sin embargo, a veces puede ser necesario ordenar esos resultados, para ello usaremos `arrange()`. La función `arrange()` permitirá ordenar un objeto en base a una o múltiples variables.]]
.panel1-arrange_1-user[

```r
trial_data %&gt;%
* count(
*   randomized_group,
*   follow_4_weeks,
*   adverse_drug_reactions
* )
```
]
 
.panel2-arrange_1-user[

```
## # A tibble: 13 × 4
##    randomized_group follow_4_weeks adverse_drug_reac…¹     n
##    &lt;chr&gt;            &lt;chr&gt;          &lt;chr&gt;               &lt;int&gt;
##  1 group A          NA             NA                      4
##  2 group A          Negative       No                    124
##  3 group A          Negative       Yes                    31
##  4 group A          Positive       No                     27
##  5 group A          Positive       Yes                    14
##  6 group B          NA             No                      5
##  7 group B          NA             &lt;NA&gt;                    1
##  8 group B          Negative       NA                      4
##  9 group B          Negative       No                    114
## 10 group B          Negative       Yes                    41
## 11 group B          Positive       NA                      2
## 12 group B          Positive       No                     25
## 13 group B          Positive       Yes                     8
## # … with abbreviated variable name ¹​adverse_drug_reactions
```
]

---
count: false
 
## Uso de arrange() 
.line-space1-7[.font100[Ya hemos visto que `count()` es sumamente útil. Además, basta con agregar más variables dentro de sus argumentos, para que estos automáticamente ingresen a generar una tabla de frecuencias. 

 Sin embargo, a veces puede ser necesario ordenar esos resultados, para ello usaremos `arrange()`. La función `arrange()` permitirá ordenar un objeto en base a una o múltiples variables.]]
.panel1-arrange_1-user[

```r
trial_data %&gt;%
  count(
    randomized_group,
    follow_4_weeks,
    adverse_drug_reactions
  ) %&gt;%
* arrange(
*   randomized_group,
*   desc(follow_4_weeks)
* )
```
]
 
.panel2-arrange_1-user[

```
## # A tibble: 13 × 4
##    randomized_group follow_4_weeks adverse_drug_reac…¹     n
##    &lt;chr&gt;            &lt;chr&gt;          &lt;chr&gt;               &lt;int&gt;
##  1 group A          Positive       No                     27
##  2 group A          Positive       Yes                    14
##  3 group A          Negative       No                    124
##  4 group A          Negative       Yes                    31
##  5 group A          NA             NA                      4
##  6 group B          Positive       NA                      2
##  7 group B          Positive       No                     25
##  8 group B          Positive       Yes                     8
##  9 group B          Negative       NA                      4
## 10 group B          Negative       No                    114
## 11 group B          Negative       Yes                    41
## 12 group B          NA             No                      5
## 13 group B          NA             &lt;NA&gt;                    1
## # … with abbreviated variable name ¹​adverse_drug_reactions
```
]

&lt;style&gt;
.panel1-arrange_1-user {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-arrange_1-user {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-arrange_1-user {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





&lt;style type="text/css"&gt;
.panel2-arrange_1-user {
    height: 300px;
    overflow-y: auto !important;
}
&lt;/style&gt;

---



count: false
 
## Uso de slice_max() 
.line-space1-7[.font110[Anteriormente conocido como `top_n()`, la función `slice_max()`, permite seleccionar cuantos casos (filas) se específique en base a una variable numérica.]]
.panel1-slice_max_1-user[

```r
*trial_data
```
]
 
.panel2-slice_max_1-user[

```
## # A tibble: 400 × 10
##    patient…¹ basel…² rando…³ follo…⁴ adver…⁵ adver…⁶ adver…⁷
##        &lt;dbl&gt; &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;   &lt;chr&gt;  
##  1         1 Positi… group B Negati… No      NA      NA     
##  2         2 Positi… group A Negati… Yes     Fatigue Mild   
##  3         3 Positi… group B Negati… No      NA      NA     
##  4         4 Positi… group A Positi… Yes     Abdomi… Mild   
##  5         5 Positi… group A Negati… Yes     Drowsi… Mild   
##  6         6 Positi… group A Negati… No      NA      NA     
##  7         7 Positi… group B Negati… No      NA      NA     
##  8         8 Positi… group A Negati… No      NA      NA     
##  9         9 Positi… group A Negati… No      NA      NA     
## 10        10 Positi… group A NA      NA      NA      NA     
## # … with 390 more rows, 3 more variables:
## #   complete_the_study &lt;chr&gt;, uncompleted_reason &lt;chr&gt;,
## #   per_protocol_analysis &lt;chr&gt;, and abbreviated variable
## #   names ¹​patient_number, ²​baseline_13c_ubt,
## #   ³​randomized_group, ⁴​follow_4_weeks,
## #   ⁵​adverse_drug_reactions,
## #   ⁶​adverse_drug_reactions_content, …
```
]

---
count: false
 
## Uso de slice_max() 
.line-space1-7[.font110[Anteriormente conocido como `top_n()`, la función `slice_max()`, permite seleccionar cuantos casos (filas) se específique en base a una variable numérica.]]
.panel1-slice_max_1-user[

```r
trial_data %&gt;%
* count(randomized_group,
*       follow_4_weeks)
```
]
 
.panel2-slice_max_1-user[

```
## # A tibble: 6 × 3
##   randomized_group follow_4_weeks     n
##   &lt;chr&gt;            &lt;chr&gt;          &lt;int&gt;
## 1 group A          NA                 4
## 2 group A          Negative         155
## 3 group A          Positive          41
## 4 group B          NA                 6
## 5 group B          Negative         159
## 6 group B          Positive          35
```
]

---
count: false
 
## Uso de slice_max() 
.line-space1-7[.font110[Anteriormente conocido como `top_n()`, la función `slice_max()`, permite seleccionar cuantos casos (filas) se específique en base a una variable numérica.]]
.panel1-slice_max_1-user[

```r
trial_data %&gt;%
  count(randomized_group,
        follow_4_weeks) %&gt;%
* slice_max(order_by = n,
*           n = 2)
```
]
 
.panel2-slice_max_1-user[

```
## # A tibble: 2 × 3
##   randomized_group follow_4_weeks     n
##   &lt;chr&gt;            &lt;chr&gt;          &lt;int&gt;
## 1 group B          Negative         159
## 2 group A          Negative         155
```
]

&lt;style&gt;
.panel1-slice_max_1-user {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-slice_max_1-user {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-slice_max_1-user {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





&lt;style type="text/css"&gt;
.panel2-slice_max_1-user {
    height: 380px;
    overflow-y: auto !important;
}
&lt;/style&gt;

---
## ¡Hazlo tú mismo!

.line-space2-0[.font120[
1. Generar una tabla de frecuencias para conocer cuantos de los que completaron el estudio, presentaron reacciones adversas al tratamiento
2. Complementar la tabla del anterior punto agregando la variable del grupo de tratamiento al que pertenece.
]]

<div class="countdown" id="timer_11f6e91e" data-warn-when="30" data-update-every="1" tabindex="0" style="right:0;bottom:0;margin:1em;font-size:4em;">
<div class="countdown-controls"><button class="countdown-bump-down">&minus;</button><button class="countdown-bump-up">&plus;</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">08</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>
---
## Introducción a tidydata 

.font80[
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="img/tidydata_7.jpg" alt="Tidy data for Efficiency, Reproducibility, and Collaboration" width="75%" /&gt;
&lt;p class="caption"&gt;Julie Lowndes y Allison Horst, 2020, Tidy data for Efficiency, Reproducibility, and Collaboration&lt;/p&gt;
&lt;/div&gt;
]

---
## Introducción a tidydata 

.left-column[.line-space1-5[
Tener datos ordenados (**tidydata**) significa tener una BD con estructuras adecuadas, donde cada registro representa una fila, cada variable representa una columna y cada celda contiene una simple medida ([**Hadley Wickham,2014**](https://www.jstatsoft.org/article/view/v059i10)).
]]

.right-column[
.font80[
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="img/tidydata_1.jpg" alt="En tidydata, cada variable es una columna; cada observación, una fila; y cada celda es una medición única." width="95%" /&gt;
&lt;p class="caption"&gt;Julie Lowndes y Allison Horst, 2020, Tidy data for Efficiency, Reproducibility, and Collaboration&lt;/p&gt;
&lt;/div&gt;
]]

---
## Uso de pivot_longer() y pivot_wider()

.panelset[
.panel[.panel-name[Intro]

.left-column[.line-space1-5[
Para este ejemplo usaremos una base de datos que contiene casos de personas fallecidas a causa del coranovirus a nivel de país, este dataset está alojada en el siguiente repositorio de GitHub ([click aquí](https://github.com/CSSEGISandData/COVID-19)).
]]

.right-column[.font80[
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="img/github_covid_1.png" alt="Repositorio github de personas fallecidas por Coronavirus a nivel global" width="95%" /&gt;
&lt;p class="caption"&gt;Personas fallecidas por Coronavirus a nivel global&lt;/p&gt;
&lt;/div&gt;
]]
]

.panel[.panel-name[Importación]

La función `read_csv` del paquete `readr` (se carga automáticamente cuando se realiza `library(tidyverse)`), permite importar archivos `csv` (data) incluso cuando el archivo está en una web.

.scroll-output300[

```r
covid19 &lt;- read_csv("https://raw.githubusercontent.com/CSSEGISandData/COVID-19/master/csse_covid_19_data/csse_covid_19_time_series/time_series_covid19_deaths_global.csv")
covid19
```

```
## # A tibble: 289 × 985
##    Province…¹ Count…²   Lat   Long 1/22/…³ 1/23/…⁴ 1/24/…⁵ 1/25/…⁶ 1/26/…⁷ 1/27/…⁸ 1/28/…⁹
##    &lt;chr&gt;      &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1 &lt;NA&gt;       Afghan…  33.9  67.7        0       0       0       0       0       0       0
##  2 &lt;NA&gt;       Albania  41.2  20.2        0       0       0       0       0       0       0
##  3 &lt;NA&gt;       Algeria  28.0   1.66       0       0       0       0       0       0       0
##  4 &lt;NA&gt;       Andorra  42.5   1.52       0       0       0       0       0       0       0
##  5 &lt;NA&gt;       Angola  -11.2  17.9        0       0       0       0       0       0       0
##  6 &lt;NA&gt;       Antarc… -71.9  23.3        0       0       0       0       0       0       0
##  7 &lt;NA&gt;       Antigu…  17.1 -61.8        0       0       0       0       0       0       0
##  8 &lt;NA&gt;       Argent… -38.4 -63.6        0       0       0       0       0       0       0
##  9 &lt;NA&gt;       Armenia  40.1  45.0        0       0       0       0       0       0       0
## 10 Australia… Austra… -35.5 149.         0       0       0       0       0       0       0
## # … with 279 more rows, 974 more variables: `1/29/20` &lt;dbl&gt;, `1/30/20` &lt;dbl&gt;,
## #   `1/31/20` &lt;dbl&gt;, `2/1/20` &lt;dbl&gt;, `2/2/20` &lt;dbl&gt;, `2/3/20` &lt;dbl&gt;, `2/4/20` &lt;dbl&gt;,
## #   `2/5/20` &lt;dbl&gt;, `2/6/20` &lt;dbl&gt;, `2/7/20` &lt;dbl&gt;, `2/8/20` &lt;dbl&gt;, `2/9/20` &lt;dbl&gt;,
## #   `2/10/20` &lt;dbl&gt;, `2/11/20` &lt;dbl&gt;, `2/12/20` &lt;dbl&gt;, `2/13/20` &lt;dbl&gt;, `2/14/20` &lt;dbl&gt;,
## #   `2/15/20` &lt;dbl&gt;, `2/16/20` &lt;dbl&gt;, `2/17/20` &lt;dbl&gt;, `2/18/20` &lt;dbl&gt;, `2/19/20` &lt;dbl&gt;,
## #   `2/20/20` &lt;dbl&gt;, `2/21/20` &lt;dbl&gt;, `2/22/20` &lt;dbl&gt;, `2/23/20` &lt;dbl&gt;, `2/24/20` &lt;dbl&gt;,
## #   `2/25/20` &lt;dbl&gt;, `2/26/20` &lt;dbl&gt;, `2/27/20` &lt;dbl&gt;, `2/28/20` &lt;dbl&gt;, …
```
]]

.panel[.panel-name[¿Pivot?]

.pull-left[.font80[
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="img/pivot_longer_wider.png" alt="Infografía de pivot realizado por Dr. Peter D.R. Higgins" width="75%" /&gt;
&lt;p class="caption"&gt;Infografía de pivot realizado por Dr. Peter D.R. Higgins&lt;/p&gt;
&lt;/div&gt;

]]

.pull-right[.line-space1-5[.font110[
Tenemos un conjunto de datos donde cada una de las fechas de fallecimiento por **Covid-19** se encuentran almacenadas como columnas. 

Sin embargo, esta forma de organizar la información podría generar dificultades al momento de pre-procesar la información o realizar algún tipo de análisis. Tener todas las fechas y casos de muerte por COVID-19 en 2 columnas (`fecha` y `fallecidos`), podría ayudar a este proceso. 
]]]
]

.panel[.panel-name[Pivotear]

.left-column[.line-space2-2[.font110[
Así, dependiendo de el formato inicial de los datos, tendremos que **pivotear** hacia la derecha (`wider`) o hacia abajo (`longer`).
]]]

.right-column[

.pull-left[.font80[
&lt;div class="figure" style="text-align: center"&gt;
&lt;img src="img/tidyr-pivot_wider_longer.gif" alt="Animación del uso de pivot_longer y pivot_wider" width="85%" /&gt;
&lt;p class="caption"&gt;Transformación de datos, 2021, Data Analytics Coding Fundamentals&lt;/p&gt;
&lt;/div&gt;
]]

.pull-right[
&lt;br&gt;
&lt;br&gt;
&lt;img src="img/ross-pivot-friends.gif" alt="Gif sobre Ross en la serie Friends diciendo Pivot Pivot Pivot, para intentar subir su sillón nuevo a su nuevo departamento" width="100%" style="display: block; margin: auto;" /&gt;
]]]
]

---



count: false
 
## Uso de pivot_longer() 
.line-space1-7[.font110[La función `pivot_longer` permitirá pasar todas las fechas que están a lo largo de las columnas a 2: `fecha` y `fallecidos`.]]
.panel1-pivot_longer_1-user[

```r
*covid19
```
]
 
.panel2-pivot_longer_1-user[

```
## # A tibble: 289 × 985
##    Provi…¹ Count…²   Lat   Long 1/22/…³ 1/23/…⁴ 1/24/…⁵
##    &lt;chr&gt;   &lt;chr&gt;   &lt;dbl&gt;  &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1 &lt;NA&gt;    Afghan…  33.9  67.7        0       0       0
##  2 &lt;NA&gt;    Albania  41.2  20.2        0       0       0
##  3 &lt;NA&gt;    Algeria  28.0   1.66       0       0       0
##  4 &lt;NA&gt;    Andorra  42.5   1.52       0       0       0
##  5 &lt;NA&gt;    Angola  -11.2  17.9        0       0       0
##  6 &lt;NA&gt;    Antarc… -71.9  23.3        0       0       0
##  7 &lt;NA&gt;    Antigu…  17.1 -61.8        0       0       0
##  8 &lt;NA&gt;    Argent… -38.4 -63.6        0       0       0
##  9 &lt;NA&gt;    Armenia  40.1  45.0        0       0       0
## 10 Austra… Austra… -35.5 149.         0       0       0
## # … with 279 more rows, 978 more variables:
## #   `1/25/20` &lt;dbl&gt;, `1/26/20` &lt;dbl&gt;, `1/27/20` &lt;dbl&gt;,
## #   `1/28/20` &lt;dbl&gt;, `1/29/20` &lt;dbl&gt;, `1/30/20` &lt;dbl&gt;,
## #   `1/31/20` &lt;dbl&gt;, `2/1/20` &lt;dbl&gt;, `2/2/20` &lt;dbl&gt;,
## #   `2/3/20` &lt;dbl&gt;, `2/4/20` &lt;dbl&gt;, `2/5/20` &lt;dbl&gt;,
## #   `2/6/20` &lt;dbl&gt;, `2/7/20` &lt;dbl&gt;, `2/8/20` &lt;dbl&gt;,
## #   `2/9/20` &lt;dbl&gt;, `2/10/20` &lt;dbl&gt;, …
```
]

---
count: false
 
## Uso de pivot_longer() 
.line-space1-7[.font110[La función `pivot_longer` permitirá pasar todas las fechas que están a lo largo de las columnas a 2: `fecha` y `fallecidos`.]]
.panel1-pivot_longer_1-user[

```r
covid19 %&gt;%
* select(-c(Lat:Long))
```
]
 
.panel2-pivot_longer_1-user[

```
## # A tibble: 289 × 983
##    Province/S…¹ Count…² 1/22/…³ 1/23/…⁴ 1/24/…⁵ 1/25/…⁶
##    &lt;chr&gt;        &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1 &lt;NA&gt;         Afghan…       0       0       0       0
##  2 &lt;NA&gt;         Albania       0       0       0       0
##  3 &lt;NA&gt;         Algeria       0       0       0       0
##  4 &lt;NA&gt;         Andorra       0       0       0       0
##  5 &lt;NA&gt;         Angola        0       0       0       0
##  6 &lt;NA&gt;         Antarc…       0       0       0       0
##  7 &lt;NA&gt;         Antigu…       0       0       0       0
##  8 &lt;NA&gt;         Argent…       0       0       0       0
##  9 &lt;NA&gt;         Armenia       0       0       0       0
## 10 Australian … Austra…       0       0       0       0
## # … with 279 more rows, 977 more variables:
## #   `1/26/20` &lt;dbl&gt;, `1/27/20` &lt;dbl&gt;, `1/28/20` &lt;dbl&gt;,
## #   `1/29/20` &lt;dbl&gt;, `1/30/20` &lt;dbl&gt;, `1/31/20` &lt;dbl&gt;,
## #   `2/1/20` &lt;dbl&gt;, `2/2/20` &lt;dbl&gt;, `2/3/20` &lt;dbl&gt;,
## #   `2/4/20` &lt;dbl&gt;, `2/5/20` &lt;dbl&gt;, `2/6/20` &lt;dbl&gt;,
## #   `2/7/20` &lt;dbl&gt;, `2/8/20` &lt;dbl&gt;, `2/9/20` &lt;dbl&gt;,
## #   `2/10/20` &lt;dbl&gt;, `2/11/20` &lt;dbl&gt;, …
```
]

---
count: false
 
## Uso de pivot_longer() 
.line-space1-7[.font110[La función `pivot_longer` permitirá pasar todas las fechas que están a lo largo de las columnas a 2: `fecha` y `fallecidos`.]]
.panel1-pivot_longer_1-user[

```r
covid19 %&gt;%
  select(-c(Lat:Long)) %&gt;%
* pivot_longer(
*   cols = -c(`Province/State`:`Country/Region`),
*   names_to = "fecha",
*   values_to = "fallecidos"
* )
```
]
 
.panel2-pivot_longer_1-user[

```
## # A tibble: 283,509 × 4
##    `Province/State` `Country/Region` fecha   fallecidos
##    &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;        &lt;dbl&gt;
##  1 &lt;NA&gt;             Afghanistan      1/22/20          0
##  2 &lt;NA&gt;             Afghanistan      1/23/20          0
##  3 &lt;NA&gt;             Afghanistan      1/24/20          0
##  4 &lt;NA&gt;             Afghanistan      1/25/20          0
##  5 &lt;NA&gt;             Afghanistan      1/26/20          0
##  6 &lt;NA&gt;             Afghanistan      1/27/20          0
##  7 &lt;NA&gt;             Afghanistan      1/28/20          0
##  8 &lt;NA&gt;             Afghanistan      1/29/20          0
##  9 &lt;NA&gt;             Afghanistan      1/30/20          0
## 10 &lt;NA&gt;             Afghanistan      1/31/20          0
## # … with 283,499 more rows
```
]

&lt;style&gt;
.panel1-pivot_longer_1-user {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-pivot_longer_1-user {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-pivot_longer_1-user {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;





&lt;style type="text/css"&gt;
.panel2-pivot_longer_1-user {
    height: 380px;
    overflow-y: auto !important;
}
&lt;/style&gt;

---




count: false
 
## Uso de pivot_wider() 
.line-space1-7[.font110[De forma análoga, la función `pivot_wider()` hará exactamente lo contrario, pasar de una data que se encuentre ordenada (**tidy data**), a una data ancha. Para esta función se tendrá que indicar los argumentos: `names_from` y `values_from`.]]
.panel1-pivot_wider_1-user[

```r
*covid19_tidy
```
]
 
.panel2-pivot_wider_1-user[

```
## # A tibble: 283,509 × 4
##    `Province/State` `Country/Region` fecha   fallecidos
##    &lt;chr&gt;            &lt;chr&gt;            &lt;chr&gt;        &lt;dbl&gt;
##  1 &lt;NA&gt;             Afghanistan      1/22/20          0
##  2 &lt;NA&gt;             Afghanistan      1/23/20          0
##  3 &lt;NA&gt;             Afghanistan      1/24/20          0
##  4 &lt;NA&gt;             Afghanistan      1/25/20          0
##  5 &lt;NA&gt;             Afghanistan      1/26/20          0
##  6 &lt;NA&gt;             Afghanistan      1/27/20          0
##  7 &lt;NA&gt;             Afghanistan      1/28/20          0
##  8 &lt;NA&gt;             Afghanistan      1/29/20          0
##  9 &lt;NA&gt;             Afghanistan      1/30/20          0
## 10 &lt;NA&gt;             Afghanistan      1/31/20          0
## # … with 283,499 more rows
```
]

---
count: false
 
## Uso de pivot_wider() 
.line-space1-7[.font110[De forma análoga, la función `pivot_wider()` hará exactamente lo contrario, pasar de una data que se encuentre ordenada (**tidy data**), a una data ancha. Para esta función se tendrá que indicar los argumentos: `names_from` y `values_from`.]]
.panel1-pivot_wider_1-user[

```r
covid19_tidy %&gt;%
* pivot_wider(
*   names_from = "fecha",
*   values_from = "fallecidos"
* )
```
]
 
.panel2-pivot_wider_1-user[

```
## # A tibble: 289 × 983
##    Province/S…¹ Count…² 1/22/…³ 1/23/…⁴ 1/24/…⁵ 1/25/…⁶
##    &lt;chr&gt;        &lt;chr&gt;     &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;   &lt;dbl&gt;
##  1 &lt;NA&gt;         Afghan…       0       0       0       0
##  2 &lt;NA&gt;         Albania       0       0       0       0
##  3 &lt;NA&gt;         Algeria       0       0       0       0
##  4 &lt;NA&gt;         Andorra       0       0       0       0
##  5 &lt;NA&gt;         Angola        0       0       0       0
##  6 &lt;NA&gt;         Antarc…       0       0       0       0
##  7 &lt;NA&gt;         Antigu…       0       0       0       0
##  8 &lt;NA&gt;         Argent…       0       0       0       0
##  9 &lt;NA&gt;         Armenia       0       0       0       0
## 10 Australian … Austra…       0       0       0       0
## # … with 279 more rows, 977 more variables:
## #   `1/26/20` &lt;dbl&gt;, `1/27/20` &lt;dbl&gt;, `1/28/20` &lt;dbl&gt;,
## #   `1/29/20` &lt;dbl&gt;, `1/30/20` &lt;dbl&gt;, `1/31/20` &lt;dbl&gt;,
## #   `2/1/20` &lt;dbl&gt;, `2/2/20` &lt;dbl&gt;, `2/3/20` &lt;dbl&gt;,
## #   `2/4/20` &lt;dbl&gt;, `2/5/20` &lt;dbl&gt;, `2/6/20` &lt;dbl&gt;,
## #   `2/7/20` &lt;dbl&gt;, `2/8/20` &lt;dbl&gt;, `2/9/20` &lt;dbl&gt;,
## #   `2/10/20` &lt;dbl&gt;, `2/11/20` &lt;dbl&gt;, …
```
]

&lt;style&gt;
.panel1-pivot_wider_1-user {
  color: black;
  width: 38.6060606060606%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel2-pivot_wider_1-user {
  color: black;
  width: 59.3939393939394%;
  hight: 32%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
.panel3-pivot_wider_1-user {
  color: black;
  width: NA%;
  hight: 33%;
  float: left;
  padding-left: 1%;
  font-size: 80%
}
&lt;/style&gt;






&lt;style type="text/css"&gt;
.panel2-pivot_wider_1-user {
    height: 340px;
    overflow-y: auto !important;
}
&lt;/style&gt;

---
## ¡Hazlo tú mismo!

.line-space2-0[.font120[
1. Replica los procedimientos observados en las diapositivas
1. Genera un objeto tidy (`pivot_longer`)
1. Genera un objeto wider (`pivot_wider`)
]]

<div class="countdown" id="timer_7b7d6c9b" data-warn-when="30" data-update-every="1" tabindex="0" style="right:0;bottom:0;margin:1em;font-size:4em;">
<div class="countdown-controls"><button class="countdown-bump-down">&minus;</button><button class="countdown-bump-up">&plus;</button></div>
<code class="countdown-time"><span class="countdown-digits minutes">08</span><span class="countdown-digits colon">:</span><span class="countdown-digits seconds">00</span></code>
</div>

---
class: center, middle

# Retroalimentación


---
class: center, middle

&lt;br&gt;
&lt;center&gt;
&lt;h2&gt;
&lt;span style="color:#106075"&gt;¡Gracias!&lt;/span&gt;
&lt;/h2&gt;
&lt;br&gt;
&lt;h3&gt;
<span>&lt;i class="fas  fa-envelope fa-xs faa-float animated "&gt;&lt;/i&gt;&lt;a href="mailto:imt.innovlab@oficinas-upch.pe"&gt;&lt;span style="color:#562457"&gt;&amp;nbsp;&amp;nbsp;imt.innovlab@oficinas-upch.pe&lt;/span&gt;&lt;/a&gt;</span>
&lt;/h3&gt;
&lt;h3&gt;
<span>&lt;i class="fab  fa-github fa-xs faa-float animated "&gt;&lt;/i&gt;&lt;a href="https://github.com/healthinnovation/"&gt;&lt;span style="color:#562457"&gt;&amp;nbsp;&amp;nbsp; @healthinnovation&lt;/span&gt;&lt;/a&gt;</span>
&lt;/h3&gt;
&lt;h3&gt;
<span>&lt;i class="fab  fa-twitter fa-xs faa-float animated "&gt;&lt;/i&gt;&lt;a href="https://twitter.com/innovalab_imt"&gt;&lt;span style="color:#562457"&gt;&amp;nbsp;&amp;nbsp; @innovalab_imt&lt;/span&gt;&lt;/a&gt;</span>
&lt;/h3&gt;
&lt;/center&gt;

&lt;br&gt;

Estas diapositivas fueron creadas mediante el paquete [xaringan](https://github.com/yihui/xaringan) y [xaringanthemer](https://github.com/gadenbuie/xaringanthemer/).

    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"slideNumberFormat": "%current%/%total%",
"highlightStyle": "idea",
"highlightLines": true,
"ratio": "16:9",
"countIncrementalSlides": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
